<div style="">
  <!-- دکمه اشتراک در واتساپ -->
  <a href="https://wa.me/?text=📖%20%0A" id="whatsappShareBtn" target="_blank" style=" " aria-label="اشتراک در واتساپ" title="اشتراک در واتساپ">
  <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M21.252 3.63507C18.9178 1.2889 15.8054 0 12.4911 0C5.66642 0 0.106914 5.55952 0.100974 12.3842C0.100974 14.57 0.671179 16.6964 1.75219 18.5792L0 25L6.56924 23.2775C8.38083 24.2635 10.4181 24.7862 12.4911 24.7862H12.497C19.3217 24.7862 24.8812 19.2267 24.8871 12.3961C24.8812 9.08767 23.5923 5.97529 21.252 3.63507ZM12.4911 22.6895C10.6379 22.6895 8.82631 22.1905 7.24636 21.2521L6.87217 21.0264L2.97576 22.048L4.0152 18.2466L3.77167 17.8546C2.73817 16.2153 2.19767 14.3205 2.19767 12.3782C2.19767 6.71181 6.81871 2.09076 12.497 2.09076C15.2471 2.09076 17.8308 3.16584 19.779 5.1081C21.7213 7.05631 22.7904 9.64006 22.7904 12.3901C22.7845 18.0744 18.1634 22.6895 12.4911 22.6895ZM18.1397 14.9798C17.8308 14.8254 16.3103 14.077 16.0252 13.9701C15.74 13.8691 15.5322 13.8156 15.3302 14.1245C15.1223 14.4334 14.5284 15.1342 14.3502 15.3362C14.172 15.5441 13.9879 15.5678 13.679 15.4134C13.3701 15.259 12.3723 14.9323 11.1903 13.875C10.2696 13.0554 9.65192 12.0397 9.46779 11.7308C9.2896 11.422 9.44997 11.2556 9.6044 11.1012C9.74101 10.9646 9.91326 10.7389 10.0677 10.5607C10.2221 10.3825 10.2756 10.2518 10.3766 10.044C10.4775 9.83607 10.43 9.65788 10.3528 9.50345C10.2756 9.34901 9.65786 7.82252 9.39651 7.2048C9.14705 6.59896 8.89164 6.68211 8.70158 6.67617C8.52339 6.66429 8.3155 6.66429 8.10761 6.66429C7.89972 6.66429 7.5671 6.74151 7.282 7.05037C6.9969 7.35923 6.20099 8.10763 6.20099 9.63412C6.20099 11.1606 7.3117 12.6277 7.46613 12.8356C7.62056 13.0435 9.64598 16.1677 12.7524 17.5101C13.4889 17.8308 14.0651 18.0209 14.5165 18.1635C15.2589 18.401 15.9301 18.3654 16.4647 18.2882C17.0587 18.1991 18.2941 17.5398 18.5554 16.8152C18.8108 16.0905 18.8108 15.4728 18.7336 15.3421C18.6564 15.2115 18.4485 15.1342 18.1397 14.9798Z" fill="#212179"/>
</svg>

  </a>

  <!-- دکمه کپی لینک -->
  <button onclick="copyLink()" style="" aria-label="کپی لینک" title="کپی لینک">
    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7.36364 8.63636V4.81818C7.36364 3.80554 7.76591 2.83437 8.48196 2.11832C9.198 1.40227 10.1692 1 11.1818 1H25.1818C26.1945 1 27.1656 1.40227 27.8817 2.11832C28.5977 2.83437 29 3.80554 29 4.81818V18.8182C29 19.8308 28.5977 20.802 27.8817 21.518C27.1656 22.2341 26.1945 22.6364 25.1818 22.6364H21.3636M7.36364 8.63636H4.81818C3.80554 8.63636 2.83437 9.03864 2.11832 9.75468C1.40227 10.4707 0.999999 11.4419 0.999999 12.4545V25.1818C0.999999 26.1945 1.40227 27.1656 2.11832 27.8817C2.83437 28.5977 3.80554 29 4.81818 29H17.5455C18.5581 29 19.5293 28.5977 20.2453 27.8817C20.9614 27.1656 21.3636 26.1945 21.3636 25.1818V22.6364M7.36364 8.63636H17.5455C18.5581 8.63636 19.5293 9.03864 20.2453 9.75468C20.9614 10.4707 21.3636 11.4419 21.3636 12.4545V22.6364" stroke="#212179" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

  </button>

  <!-- دکمه اشتراک در تلگرام -->
  <a href="#" id="telegramShareBtn" onclick="shareTelegram(event)" style=" " aria-label="اشتراک در تلگرام" title="اشتراک در تلگرام">
    <svg width="25" height="25" viewBox="0 0 240 240" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M120 0C53.73 0 0 53.73 0 120C0 186.27 53.73 240 120 240C186.27 240 240 186.27 240 120C240 53.73 186.27 0 120 0Z" fill="#37AEE2"/>
      <path d="M175.6 70.2L156.3 171.7C154.9 179 150.5 180.8 144.6 177.4L110.9 152.6L94.1 168.8C92.5 170.4 91.1 171.8 88 171.8L90.6 137.7L152.9 81.5C155.6 79.1 152.2 77.8 148.7 80.1L72.2 128L38.8 117.5C31.8 115.3 31.7 110.2 40.3 106.8L167 57.6C172.9 55.4 178 59 175.6 70.2Z" fill="white"/>
    </svg>
  </a>

  <!-- دکمه اشتراک‌گذاری عمومی -->
  <button onclick="sharePost()" style="" aria-label="اشتراک‌گذاری" title="اشتراک‌گذاری">
    <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M19.8789 1.45758C20.5908 1.31919 21.3284 1.43289 21.9658 1.77887C22.6032 2.12488 23.1003 2.68166 23.3721 3.35406C23.6438 4.02652 23.6741 4.77266 23.4561 5.46442C23.2381 6.15606 22.7858 6.74996 22.1777 7.14508C21.5695 7.54018 20.8427 7.71238 20.1221 7.63043C19.4014 7.54845 18.7315 7.2175 18.2275 6.69586L17.9727 6.43219L17.6445 6.59625L7.88281 11.4791L7.55566 11.6422L7.61328 12.0045C7.66555 12.3327 7.66556 12.6674 7.61328 12.9957L7.55566 13.357L7.88281 13.5211L17.6455 18.4039L17.9736 18.5679L18.2295 18.3043C18.7485 17.7675 19.4421 17.4342 20.1855 17.3648C20.9289 17.2955 21.6729 17.4938 22.2822 17.9254C22.8915 18.3569 23.3255 18.9931 23.5068 19.7173C23.6881 20.4416 23.6046 21.2069 23.2705 21.8746C22.9364 22.5423 22.3739 23.0679 21.6855 23.357C20.9972 23.6461 20.2282 23.6796 19.5176 23.4507C18.8069 23.2218 18.2017 22.7455 17.8115 22.1089C17.4214 21.4724 17.2721 20.7172 17.3906 19.98L17.4482 19.6177L17.1201 19.4537L7.35742 14.5718L7.0293 14.4078L6.77441 14.6714C6.34173 15.119 5.78477 15.427 5.17578 15.5562C4.5669 15.6854 3.93352 15.6293 3.35645 15.3961C2.77933 15.1627 2.2846 14.7627 1.93652 14.2466C1.5885 13.7305 1.40241 13.122 1.40234 12.4996C1.40234 11.8771 1.58854 11.2686 1.93652 10.7525C2.28461 10.2363 2.77925 9.83547 3.35645 9.60211C3.93346 9.36891 4.56696 9.31283 5.17578 9.44196C5.78481 9.57118 6.34172 9.88005 6.77441 10.3277L7.0293 10.5914L7.35742 10.4273L17.1201 5.54645L17.4482 5.38239L17.3906 5.02008C17.3643 4.85646 17.3509 4.69069 17.3506 4.52496C17.3506 3.79984 17.6024 3.09726 18.0635 2.53766C18.5248 1.97799 19.1669 1.59601 19.8789 1.45758Z" fill="#212179" stroke="black"/>
</svg>

  </button>
</div>

<script>
  const shortlinkElement = document.querySelector("link[rel='shortlink']");
  const currentUrl = (shortlinkElement && shortlinkElement.href) ? shortlinkElement.href : window.location.href;
  const pageTitle = document.title;

  // واتساپ: فقط URL برای جلوگیری از تکرار محتوا
  document.getElementById("whatsappShareBtn").href = `https://wa.me/?text=${encodeURIComponent(currentUrl)}`;

  // تلگرام: متن بدون URL (URL جداگانه با پارامتر url ارسال می‌شود)
  const telegramText = [
    `📖 ${pageTitle}`,
    "",
    "بیشتر بخوانید:",
    currentUrl
  ].join("\n");
  const telegramBtn = document.getElementById("telegramShareBtn");
  if (telegramBtn) {
    // href پیش‌فرض وب به‌عنوان بکاپ (متن + url جداگانه)
    telegramBtn.href = `https://t.me/share/url?url=${encodeURIComponent(currentUrl)}&text=${encodeURIComponent(telegramText)}`;
  }

  // کلیک تلگرام با دیپ‌لینک + بکاپ وب
  function shareTelegram(e) {
    if (e) e.preventDefault();
    // دیپ‌لینک با متن + url جداگانه
    const deepLink = `tg://msg_url?url=${encodeURIComponent(currentUrl)}&text=${encodeURIComponent(telegramText)}`;
    const webLink = `https://t.me/share/url?url=${encodeURIComponent(currentUrl)}&text=${encodeURIComponent(telegramText)}`;
    // استفاده از location برای جلوگیری از بلاک شدن پاپ‌آپ
    const fallbackTimer = setTimeout(() => {
      window.open(webLink, '_blank');
    }, 800);
    try {
      window.location.href = deepLink;
    } catch (err) {
      clearTimeout(fallbackTimer);
      window.open(webLink, '_blank');
    }
  }

  // متن استاندارد برای اشتراک‌گذاری عمومی
  // برای جلوگیری از تکرار عنوان/لینک در اپ‌هایی مثل تلگرام، فقط URL را به اشتراک می‌گذاریم

  // تابع کپی کردن لینک
  function copyLink() {
    navigator.clipboard.writeText(currentUrl).then(() => {
      alert("لینک مطلب/خبر کپی شد ✅");
    }).catch(err => {
      alert("خطا در کپی لینک. لطفاً به‌صورت دستی کپی کنید.");
    });
  }

  // تابع Share API (برای موبایل یا مرورگرهایی که پشتیبانی می‌کنند)
  function sharePost() {
    if (navigator.share) {
      navigator.share({
        url: currentUrl
      }).catch(error => {
        console.log('Error sharing:', error);
      });
      return;
    }

    // Fall back: فقط URL را کپی می‌کنیم تا تکراری نشود
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(currentUrl).then(() => {
        alert("لینک مطلب/خبر کپی شد ✅");
      }).catch(() => {
        // اگر کپی ناموفق بود، لینک را باز کنیم
        window.open(currentUrl, '_blank');
      });
      return;
    }

    // آخرین راه‌حل: باز کردن لینک
    window.open(currentUrl, '_blank');
  }
</script>
