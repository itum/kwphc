# راهنمای ثبت نام سمینارها

## قابلیت‌های اضافه شده

### 1. فیلدهای جدید برای سمینارها

در صفحه ویرایش سمینار، فیلدهای زیر اضافه شده است:

- **تاریخ فعال**: تاریخ شروع امکان ثبت نام
- **فعال بودن ثبت نام**: تیک برای فعال/غیرفعال کردن ثبت نام
- **قیمت (تومان)**: قیمت سمینار (0 = رایگان)
- **مدت زمان (ساعت)**: مدت زمان برگزاری سمینار
- **ظرفیت**: حداکثر تعداد شرکت‌کنندگان

### 2. فرم ثبت نام

فرم ثبت نام شامل فیلدهای زیر است:

#### اطلاعات شخصی
- نام و نام خانوادگی
- نام پدر
- شغل
- شماره شناسنامه
- کد ملی (با اعتبارسنجی)
- محل تولد و صدور
- ایمیل و شماره تماس

#### اطلاعات تحصیلی
- مقطع تحصیلی
- رشته تحصیلی

#### مدارک مورد نیاز
- آخرین مدرک تحصیلی
- کارت ملی
- صفحه اول شناسنامه
- عکس پرسنلی

### 3. درگاه پرداخت زرین‌پال

- پشتیبانی از حالت Sandbox برای تست
- پرداخت خودکار برای سمینارهای پولی
- ثبت نام رایگان برای سمینارهای رایگان
- شماره پیگیری برای هر پرداخت

### 4. سیستم گزارش‌گیری

در منوی مدیریت دانشگاه، بخش "گزارش ثبت نام سمینارها" شامل:

- آمار کلی ثبت نام‌ها
- تعداد پرداخت‌های در انتظار
- تعداد پرداخت‌های تکمیل شده
- کل درآمد
- لیست جزئیات ثبت نام‌ها

## نحوه استفاده

### 1. تنظیم درگاه پرداخت

1. به منوی "مدیریت دانشگاه" > "تنظیمات عمومی" بروید
2. در بخش "تنظیمات درگاه پرداخت زرین‌پال":
   - کلید درگاه خود را وارد کنید
   - حالت تست را فعال/غیرفعال کنید
3. تنظیمات را ذخیره کنید

### 2. ایجاد سمینار جدید

1. به منوی "مدیریت دانشگاه" > "همه کارگاه و سمینارها" بروید
2. "افزودن جدید" را کلیک کنید
3. اطلاعات سمینار را وارد کنید
4. در بخش "جزئیات سمینار":
   - تاریخ فعال را تنظیم کنید
   - تیک "فعال بودن ثبت نام" را بزنید
   - قیمت را وارد کنید (0 برای رایگان)
   - مدت زمان و ظرفیت را مشخص کنید
5. سمینار را منتشر کنید

### 3. استفاده از Shortcode

برای نمایش فرم ثبت نام در هر صفحه:

```
[um_seminar_registration seminar_id="123"]
```

### 4. نمایش در ویجت المنتور

ویجت "اسلایدر کارگاه و سمینار" به‌طور خودکار:
- دکمه "ثبت نام و پرداخت" را برای سمینارهای پولی نمایش می‌دهد
- دکمه "ثبت نام رایگان" را برای سمینارهای رایگان نمایش می‌دهد
- دکمه "شروع یادگیری" را برای سمینارهای غیرفعال نمایش می‌دهد

## شرایط ثبت نام

### بررسی‌های خودکار

سیستم به‌طور خودکار موارد زیر را بررسی می‌کند:

1. **فعال بودن ثبت نام**: تیک "فعال بودن ثبت نام" باید زده شده باشد
2. **تاریخ فعال**: تاریخ فعلی باید بعد از "تاریخ فعال" باشد
3. **ظرفیت**: تعداد ثبت نام‌ها نباید از ظرفیت تعیین شده بیشتر باشد
4. **اعتبارسنجی کد ملی**: کد ملی وارد شده باید معتبر باشد

### محدودیت‌های فایل

- فرمت‌های مجاز: JPG, JPEG, PNG
- حداکثر حجم: 200 کیلوبایت
- نام فایل باید لاتین باشد
- حداکثر طول نام فایل: 20 کاراکتر

## مدیریت گزارش‌ها

### آمار کلی

- **کل ثبت نام‌ها**: تعداد کل ثبت نام‌های انجام شده
- **پرداخت‌های در انتظار**: ثبت نام‌هایی که هنوز پرداخت نشده‌اند
- **پرداخت‌های تکمیل شده**: ثبت نام‌هایی که پرداخت شده‌اند
- **کل درآمد**: مجموع مبالغ پرداخت شده

### عملیات روی ثبت نام‌ها

- **مشاهده جزئیات**: کلیک روی "جزئیات" برای مشاهده اطلاعات کامل
- **فیلتر بر اساس وضعیت**: امکان فیلتر کردن بر اساس وضعیت پرداخت
- **جستجو**: امکان جستجو در نام، ایمیل و شماره تماس

## نکات مهم

### امنیت

- تمام فیلدها اعتبارسنجی می‌شوند
- فایل‌های آپلود شده بررسی می‌شوند
- از nonce برای امنیت AJAX استفاده می‌شود

### عملکرد

- فرم‌ها به صورت AJAX ارسال می‌شوند
- مودال‌ها برای تجربه کاربری بهتر استفاده می‌شوند
- استایل‌ها responsive هستند

### پشتیبانی

در صورت بروز مشکل:
1. لاگ‌های وردپرس را بررسی کنید
2. تنظیمات درگاه پرداخت را چک کنید
3. وضعیت سمینار را بررسی کنید

## فایل‌های اضافه شده

- `includes/seminar-registration/class-um-seminar-registration.php`
- `includes/seminar-registration/class-um-zarinpal-gateway.php`
- `assets/js/seminar-registration.js`
- `assets/css/seminar-registration.css`

## جداول دیتابیس

- `wp_um_seminar_registrations`: اطلاعات ثبت نام‌ها
- `wp_um_seminar_payments`: اطلاعات پرداخت‌ها
